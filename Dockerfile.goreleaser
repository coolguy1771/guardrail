FROM gcr.io/distroless/static:nonroot@sha256:e8a4044e0b4ae4257efa45fc026c0bc30ad320d43bd4c1a7d5271bd241e386d0

WORKDIR /

# Copy the pre-built binary (distroless has no /usr/local/bin)
COPY guardrail /guardrail

# Copy configuration files
COPY configs/guardrail.yaml /etc/guardrail/guardrail.yaml

# USER is already nonroot (65532) in distroless/static:nonroot

# Set the entrypoint
ENTRYPOINT ["/guardrail"]

# Default command
CMD ["--help"]
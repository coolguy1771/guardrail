FROM gcr.io/distroless/static:nonroot@sha256:cdf4daaf154e3e27cfffc799c16f343a384228f38646928a1513d925f473cb46

WORKDIR /

# Copy the pre-built binary (distroless has no /usr/local/bin)
COPY guardrail /guardrail

# Copy configuration files
COPY configs/guardrail.yaml /etc/guardrail/guardrail.yaml

# USER is already nonroot (65532) in distroless/static:nonroot

# Set the entrypoint
ENTRYPOINT ["/guardrail"]

# Default command
CMD ["--help"]
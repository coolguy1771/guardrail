FROM gcr.io/distroless/static:nonroot@sha256:627d6c5a23ad24e6bdff827f16c7b60e0289029b0c79e9f7ccd54ae3279fb45f

WORKDIR /

# Copy the pre-built binary (distroless has no /usr/local/bin)
COPY guardrail /guardrail

# Copy configuration files
COPY configs/guardrail.yaml /etc/guardrail/guardrail.yaml

# USER is already nonroot (65532) in distroless/static:nonroot

# Set the entrypoint
ENTRYPOINT ["/guardrail"]

# Default command
CMD ["--help"]